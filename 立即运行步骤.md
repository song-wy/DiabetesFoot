# 立即运行步骤

## 🚀 快速运行指南

### 步骤1：清理并重新生成解决方案（1分钟）

1. **在 Visual Studio 中**：
   - 点击菜单：生成 → 清理解决方案
   - 等待清理完成
   - 点击菜单：生成 → 重新生成解决方案
   - 查看输出窗口，确认没有错误

### 步骤2：处理数据库文件（2分钟，推荐）

**为什么要删除旧数据库文件？**
- 我们修改了数据模型（WoundRecord 主键、添加 Medication 表）
- 旧的数据库可能不包含最新的表结构
- 删除旧文件，让 Entity Framework 自动创建新数据库更简单

**操作步骤**：
1. **停止 IIS Express**（如果正在运行）
   - 在系统托盘找到 IIS Express 图标
   - 右键点击 → 退出

2. **删除数据库文件**：
   - 在 Visual Studio 中：视图 → 解决方案资源管理器
   - 展开 `DiabetesFoot` 项目
   - 展开 `App_Data` 文件夹
   - 删除以下文件：
     - `aspnet-DiabetesFoot-*.mdf`
     - `aspnet-DiabetesFoot-*.ldf`
     - `DefaultConnection.mdf`
     - `DefaultConnection_log.ldf`
     - `DiabetesFoot.Controllers.WoundRecordController+DiabetesFootDbContext.mdf`
     - `DiabetesFoot.Controllers.WoundRecordController+DiabetesFootDbContext_log.ldf`

3. **或者使用文件资源管理器**：
   - 导航到：`D:\ASP.NET实训\DiabetesFoot\DiabetesFoot\App_Data`
   - 删除所有 `.mdf` 和 `.ldf` 文件

### 步骤3：运行项目（立即）

1. **按 F5 或点击"启动"按钮**
2. **浏览器会自动打开**
3. **首次运行时会自动创建数据库**

### 步骤4：注册和登录

1. **访问注册页面**：
   - 浏览器会自动打开主页
   - 点击"注册"链接（如果没有，访问 `/Account/Register`）

2. **创建账户**：
   - 填写用户名（邮箱）
   - 填写密码（要求：至少6个字符，包含数字、大写字母、小写字母、特殊字符）
   - 确认密码
   - 点击"注册"

3. **登录系统**：
   - 使用注册的账户登录
   - 访问 `/Account/Login`

### 步骤5：测试功能

1. **测试患者管理**：
   - 添加新患者
   - 查看患者列表
   - 查看患者详情
   - 编辑患者信息

2. **测试血糖记录**：
   - 添加血糖记录
   - 查看血糖记录列表
   - 测试危急值检测

3. **测试伤口记录**：
   - 添加伤口记录
   - 上传伤口照片
   - 查看伤口记录列表

4. **测试药物管理**：
   - 添加药物记录
   - 查看药物列表
   - 查看药物提醒

## ⚠️ 如果遇到问题

### 问题1：编译错误

**解决方法**：
1. 查看输出窗口中的错误信息
2. 确保所有 NuGet 包都已还原
3. 清理并重新生成解决方案

### 问题2：数据库表不存在

**错误信息**：
```
Invalid object name 'dbo.Patients'
```

**解决方法**：
1. 确认已删除旧的数据库文件
2. 重新运行项目
3. Entity Framework 会自动创建数据库

### 问题3：端口被占用

**解决方法**：
1. 更改项目属性中的端口号
2. 或者关闭占用端口的其他应用程序

## 📋 检查清单

运行前请确认：

- [x] 项目已在 Visual Studio 中打开
- [x] SQL Server LocalDB 正在运行
- [x] NuGet 包已安装
- [ ] 项目已清理并重新生成（需要执行）
- [ ] 旧数据库文件已删除（推荐）
- [ ] 没有编译错误（需要检查）
- [ ] 准备运行项目（可以执行）

## 🎯 最快运行方式

如果您想最快运行项目，可以：

1. **直接按 F5 运行**
   - 如果数据库文件已存在，可能会遇到表不存在错误
   - 如果遇到错误，按照上面的步骤2删除数据库文件

2. **或者先删除数据库文件，再运行**
   - 这样更安全，确保使用最新的数据库结构

## 💡 提示

- **首次运行**：删除旧数据库文件，让 Entity Framework 自动创建新数据库
- **后续运行**：直接按 F5 运行即可
- **调试**：使用 F5 启动调试，使用 Ctrl+F5 启动不调试

---

**创建时间**：2025年1月
**最后更新**：2025年1月

